services:
  backup:
    image: offen/docker-volume-backup:v2.46.1
    restart: unless-stopped
    environment:
      BACKUP_CRON_EXPRESSION: "@daily"
      BACKUP_JITTER: "0s"
      BACKUP_COMPRESSION: "gz"
      BACKUP_RETENTION_DAYS: "30"
      BACKUP_PRUNING_LEEWAY: "1m"
    volumes:
      - /etc/timezone:/etc/timezone:ro
      - /etc/localtime:/etc/localtime:ro
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - ./configuration:/etc/dockervolumebackup/conf.d
      # Destination Directory
      - /opt/terminal_dogma/AppData:/archive
      # Authentik (DB, data, secrets)
      - /opt/docker_data/authentik/data:/backup/authentik/authentik_data
      - /opt/docker_data/authentik/secrets:/backup/authentik/authentik_secrets
      - /opt/docker_data/authentik/db_backup:/backup/authentik/authentik_db
